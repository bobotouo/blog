{"_path":"/blog/2022-03-12-regex-basics","title":"正则表达式基础, 以及常见正则","date":"2022-03-12 15:20:04","body":"<h3>基础符号</h3>\n<p>| ：满足左右两边的表达式</p>\n<p>[]：原子表，只能匹配一个，存在于内，如：<code>[a-z]</code>在a-z的写字母中、<code>[124-5]</code>在1、2、4、-、5中</p>\n<p>()：原子组，存在于内，如：<code>(12|34)</code>在12、34中；</p>\n<p>^ $：起始 结束，常配合完整验证(因为正常情况下匹配不到就停止)；单独内部使用^为非，如：<code>[^\\d]</code>表示除了数值</p>\n<p>{}：位数，如：<code>{3,5}</code>表示3-5位、<code>{3}</code>表示3位</p>\n<p>\\d：一个数值，\\D非数值</p>\n<p>\\b：元字符，通常原来间隔英文单词，如：<code>/\\b adic \\b/</code></p>\n<p>\\s：空白，\\S非空白</p>\n<p>\\w：字母数字下划线</p>\n<p>+：一个或多个</p>\n<p>*：没有或多个</p>\n<p>?: 有或者没有</p>\n<p>.：除换行外任意字符</p>\n<p>i g m u：大小写不敏感 全局 多行匹配 特殊处理</p>\n<h3>基础方法</h3>\n<h4>match(),将字符串根据正则拆分为数组，不会改变字符串本身</h4>\n<pre><code class=\"language-bash\">var str = &#39;hsakjd55ad4asda645&#39;\nconsole.log(str.match(/\\d/g))\n//(6) [&quot;5&quot;, &quot;5&quot;, &quot;4&quot;, &quot;6&quot;, &quot;4&quot;, &quot;5&quot;]\n</code></pre>\n<h4>test(),监测字符串是否满足正则，返回bool</h4>\n<pre><code class=\"language-bash\">var str = &#39;hsakjd55ad4asda645&#39;\nconsole.log(/d/.test(str))\n// true\n</code></pre>\n<h4>exec()，与match类似，但其有个属性lastIndex控制每次执行后的次数(正则需要使用全局模式g才会记录)</h4>\n<h4>replace(),将支持正则的内容处理后返回，不会改变字符串本身</h4>\n<pre><code class=\"language-bash\">let str = &#39;www.adicw.cn&#39;\nlet rel = str.replace(/cn/, item =&gt; {\n    return &#39;com&#39;\n})\nconsole.log(str, rel)\n// www.adicw.cn www.adicw.com\n</code></pre>\n<hr>\n<h3>常见实例</h3>\n<h4>数字</h4>\n<ol>\n<li><p>数字：<code>^[0-9]*$</code></p>\n</li>\n<li><p>n位的数字：<code>^\\d{n}$</code></p>\n</li>\n<li><p>至少n位的数字：<code>^\\d{n,}$</code></p>\n</li>\n<li><p>m-n位的数字：<code>^\\d{m,n}$</code></p>\n</li>\n<li><p>零和非零开头的数字：<code>^(0|[1-9][0-9]*)$</code></p>\n</li>\n<li><p>非零开头的最多带两位小数的数字：<code>^([1-9][0-9]*)+(.[0-9]{1,2})?$</code></p>\n</li>\n<li><p>带1-2位小数的正数或负数：<code>^(\\-)?\\d+(\\.\\d{1,2})?$</code></p>\n</li>\n<li><p>正数、负数、和小数：<code>^(\\-|\\+)?\\d+(\\.\\d+)?$</code></p>\n</li>\n<li><p>有两位小数的正实数：<code>^[0-9]+(.[0-9]{2})?$</code></p>\n</li>\n<li><p>有1~3位小数的正实数：<code>^[0-9]+(.[0-9]{1,3})?$</code></p>\n</li>\n<li><p>非零的正整数：<code>^[1-9]\\d*$</code> 或 <code>^([1-9][0-9]*){1,3}$ 或 ^\\+?[1-9][0-9]*$</code></p>\n</li>\n<li><p>非零的负整数：<code>^\\-[1-9][]0-9*$</code> 或 <code>^-[1-9]\\d*$</code></p>\n</li>\n<li><p>非负整数：<code>^\\d+$</code> 或 <code>^[1-9]\\d*|0$</code></p>\n</li>\n<li><p>非正整数：<code>^-[1-9]\\d*|0$</code> 或 <code>^((-\\d+)|(0+))$</code></p>\n</li>\n<li><p>非负浮点数：<code>^\\d+(\\.\\d+)?$</code> 或 <code>^[1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*|0?\\.0+|0$</code></p>\n</li>\n<li><p>非正浮点数：<code>^((-\\d+(\\.\\d+)?)|(0+(\\.0+)?))$</code> 或 <code>^(-([1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*))|0?\\.0+|0$</code></p>\n</li>\n<li><p>正浮点数：<code>^[1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*$</code> 或 <code>^(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*))$</code></p>\n</li>\n<li><p>负浮点数：<code>^-([1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*)$</code> 或 <code>^(-(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*)))$</code></p>\n</li>\n<li><p>浮点数：<code>^(-?\\d+)(\\.\\d+)?$</code> 或 <code>^-?([1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*|0?\\.0+|0)$</code></p>\n</li>\n</ol>\n<h4>字符串</h4>\n<ol>\n<li><p>汉字：<code>^[\\u4e00-\\u9fa5]{0,}$</code></p>\n</li>\n<li><p>英文和数字：<code>^[A-Za-z0-9]+$ </code>或 <code>^[A-Za-z0-9]{4,40}$</code></p>\n</li>\n<li><p>长度为3-20的所有字符：<code>^.{3,20}$</code></p>\n</li>\n<li><p>由26个英文字母组成的字符串：<code>^[A-Za-z]+$</code></p>\n</li>\n<li><p>由26个大写英文字母组成的字符串：<code>^[A-Z]+$</code></p>\n</li>\n<li><p>由26个小写英文字母组成的字符串：<code>^[a-z]+$</code></p>\n</li>\n<li><p>由数字和26个英文字母组成的字符串：<code>^[A-Za-z0-9]+$</code></p>\n</li>\n<li><p>由数字、26个英文字母或者下划线组成的字符串：<code>^\\w+$</code> 或 <code>^\\w{3,20}$</code></p>\n</li>\n<li><p>中文、英文、数字包括下划线：<code>^[\\u4E00-\\u9FA5A-Za-z0-9_]+$</code></p>\n</li>\n<li><p>中文、英文、数字但不包括下划线等符号：<code>^[\\u4E00-\\u9FA5A-Za-z0-9]+$</code> 或 <code>^[\\u4E00-\\u9FA5A-Za-z0-9]{2,20}$ </code></p>\n</li>\n</ol>\n<h4>特殊需求表达式</h4>\n<ol>\n<li><p>Email地址：<code>^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$</code></p>\n</li>\n<li><p>域名：<code>[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+/.?</code></p>\n</li>\n<li><p>InternetURL：<code>[a-zA-z]+://[^\\s]* 或 ^http://([\\w-]+\\.)+[\\w-]+(/[\\w-./?%&amp;=]*)?$</code></p>\n</li>\n<li><p>手机号码：<code>^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\\d{8}$</code></p>\n</li>\n<li><p>电话号码(&quot;XXX-XXXXXXX&quot;、&quot;XXXX-XXXXXXXX&quot;、&quot;XXX-XXXXXXX&quot;、&quot;XXX-XXXXXXXX&quot;、&quot;XXXXXXX&quot;和&quot;XXXXXXXX)：<code>^(\\(\\d{3,4}-)|\\d{3.4}-)?\\d{7,8}$</code></p>\n</li>\n<li><p>国内电话号码(0511-4405222、021-87888822)：<code>\\d{3}-\\d{8}|\\d{4}-\\d{7}</code></p>\n</li>\n<li><p>身份证号(15位、18位数字)：<code>^\\d{15}|\\d{18}$</code></p>\n</li>\n<li><p>短身份证号码(数字、字母x结尾)：<code>^([0-9]){7,18}(x|X)?$ 或 ^\\d{8,18}|[0-9x]{8,18}|[0-9X]{8,18}?$</code></p>\n</li>\n<li><p>帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：<code>^[a-zA-Z][a-zA-Z0-9_]{4,15}$</code></p>\n</li>\n<li><p>密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：<code>^[a-zA-Z]\\w{5,17}$</code></p>\n</li>\n<li><p>强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：<code>^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$</code></p>\n</li>\n<li><p>日期格式：<code>^\\d{4}-\\d{1,2}-\\d{1,2}</code></p>\n</li>\n<li><p>一年的12个月(01～09和1～12)：<code>^(0?[1-9]|1[0-2])$</code></p>\n</li>\n<li><p>一个月的31天(01～09和1～31)：<code>^((0?[1-9])|((1|2)[0-9])|30|31)$</code></p>\n</li>\n<li><p>钱的输入格式：</p>\n</li>\n<li><p>1.有四种钱的表示形式我们可以接受:&quot;10000.00&quot; 和 &quot;10,000.00&quot;, 和没有 &quot;分&quot; 的 &quot;10000&quot; 和 &quot;10,000&quot;：<code>^[1-9][0-9]*$</code></p>\n</li>\n<li><p>2.这表示任意一个不以0开头的数字,但是,这也意味着一个字符&quot;0&quot;不通过,所以我们采用下面的形式：<code>^(0|[1-9][0-9]*)$</code></p>\n</li>\n<li><p>3.一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：<code>^(0|-?[1-9][0-9]*)$</code></p>\n</li>\n<li><p>4.这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧.下面我们要加的是说明可能的小数部分：<code>^[0-9]+(.[0-9]+)?$</code></p>\n</li>\n<li><p>5.必须说明的是,小数点后面至少应该有1位数,所以&quot;10.&quot;是不通过的,但是 &quot;10&quot; 和 &quot;10.2&quot; 是通过的：<code>^[0-9]+(.[0-9]{2})?$</code></p>\n</li>\n<li><p>6.这样我们规定小数点后面必须有两位,如果你认为太苛刻了,可以这样：<code>^[0-9]+(.[0-9]{1,2})?$</code></p>\n</li>\n<li><p>7.这样就允许用户只写一位小数.下面我们该考虑数字中的逗号了,我们可以这样：<code>^[0-9]{1,3}(,[0-9]{3})*(.[0-9]{1,2})?$</code></p>\n</li>\n</ol>\n<p>23 8.1到3个数字,后面跟着任意个 逗号+3个数字,逗号成为可选,而不是必须：<code>^([0-9]+|[0-9]{1,3}(,[0-9]{3})*)(.[0-9]{1,2})?$</code></p>\n<ol start=\"24\">\n<li><p>备注：这就是最终结果了,别忘了&quot;+&quot;可以用&quot;*&quot;替代如果你觉得空字符串也可以接受的话(奇怪,为什么?)最后,别忘了在用函数时去掉去掉那个反斜杠,一般的错误都在这里</p>\n</li>\n<li><p>xml文件：<code>^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\\\.[x|X][m|M][l|L]$</code></p>\n</li>\n<li><p>中文字符的正则表达式：<code>[\\u4e00-\\u9fa5]</code></p>\n</li>\n<li><p>双字节字符：<code>[^\\x00-\\xff] </code>(包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))</p>\n</li>\n<li><p>空白行的正则表达式：<code>\\n\\s*\\r </code>(可以用来删除空白行)</p>\n</li>\n<li><p>HTML标记的正则表达式：<code>&lt;(\\S*?)[^&gt;]*&gt;.*?&lt;/\\1&gt;|&lt;.*? /&gt; </code>(网上流传的版本太糟糕，上面这个也仅仅能部分，对于复杂的嵌套标记依旧无能为力)</p>\n</li>\n<li><p>首尾空白字符的正则表达式：<code>^\\s*|\\s*$或(^\\s*)|(\\s*$)</code> (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)</p>\n</li>\n<li><p>腾讯QQ号：<code>[1-9][0-9]{4,}</code> (腾讯QQ号从10000开始)</p>\n</li>\n<li><p>中国邮政编码：<code>[1-9]\\d{5}(?!\\d)</code> (中国邮政编码为6位数字)</p>\n</li>\n<li><p>IP地址：<code>\\d+\\.\\d+\\.\\d+\\.\\d+</code> (提取IP地址时有用)</p>\n</li>\n<li><p>IP地址：<code>((?:(?:25[0-5]|2[0-4]\\\\d|[01]?\\\\d?\\\\d)\\\\.){3}(?:25[0-5]|2[0-4]\\\\d|[01]?\\\\d?\\\\d))</code></p>\n</li>\n<li><p>IP-v4地址：<code>\\\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\\\b</code> (提取IP地址时有用)</p>\n</li>\n</ol>\n"}