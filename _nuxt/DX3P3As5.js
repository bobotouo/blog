import{_ as j}from"./DvOWG6es.js";import B from"./XQq4yvxR.js";import{u as L,_ as P}from"./CyL7AXFe.js";import{j as A,L as V,J as Y,M as F,c as a,b,w as H,a as n,t as c,u as t,H as i,F as y,G as k,k as R,K as S,o as e,d as T,f as q,_ as E}from"./Ct5FLfCv.js";import{u as G}from"./DxBXoRm2.js";import{u as I,a as J}from"./B8zLgfdS.js";import{q as K}from"./nN0hSr1E.js";import{u as O}from"./BW61UXr4.js";import"./BKMqDDGk.js";import"./BSZFgSs5.js";import"./B8IaAclc.js";import"./CsvSTZUp.js";import"./BJ2ClxiI.js";const U={class:"max-w-4xl mx-auto py-10 px-6"},z={class:"mt-6 rounded-3xl border border-white/10 bg-white/5 backdrop-blur-xl p-8 md:p-10 shadow-[0_30px_80px_rgba(0,0,0,0.45)]"},Q={class:"text-4xl md:text-5xl font-semibold text-white mb-4"},W={class:"text-sm text-white/60 mb-6 flex flex-wrap items-center gap-4"},X={key:0,class:"text-white/40"},Z={key:1,class:"text-white/40"},tt={key:2,class:"text-white/40"},st={key:0,class:"text-white/70 mb-6"},et={key:1,class:"grid gap-3 sm:grid-cols-2 mb-8"},at=["src"],ot={key:2,class:"flex flex-wrap gap-2 mb-8"},nt={class:"prose prose-invert max-w-none"},rt=["innerHTML"],ct={class:"mt-10"},it=A({__name:"[...slug]",async setup(lt){let l,d;const u=V(),_=S().public.baseUrl||"/",x=_.replace(/\/$/,"")+u.path,{views:h}=G(x),{count:f}=L(x),g=Array.isArray(u.params.slug)?u.params.slug.join("/"):u.params.slug,p=`/snapshots/${g}`,v=_.replace(/\/$/,""),{data:s}=([l,d]=Y(async()=>I(`snapshot-${p}`,async()=>{const r=J(`snapshot-${p}`).data.value;if(r)return r;try{return await K(p).findOne()}catch{return await $fetch(`${v}/snapshots/${g}.json`).catch(()=>null)??null}})),l=await l,d(),l),w=q(()=>{const o=s.value?.body;return typeof o=="string"?o:null});if(!s.value)throw F({statusCode:404,statusMessage:"Page not found"});function C(r){return r?O(r,"YYYY-MM-DD").value:""}return(r,o)=>{const $=j,D=B,M=P;return e(),a("article",U,[b($,{to:"/snapshots",class:"text-xs uppercase tracking-[0.35em] text-white/50"},{default:H(()=>[...o[0]||(o[0]=[T(" ← 返回快照 ",-1)])]),_:1}),n("div",z,[o[1]||(o[1]=n("p",{class:"text-xs uppercase tracking-[0.4em] text-white/40 mb-4"},"Snapshot",-1)),n("h1",Q,c(t(s)?.title),1),n("div",W,[n("span",null,c(C(t(s)?.date)),1),t(s)?.location?(e(),a("span",X,"· "+c(t(s)?.location),1)):i("",!0),t(h)!==null?(e(),a("span",Z,"· "+c(t(h))+" 次浏览",1)):i("",!0),t(f)!==null?(e(),a("span",tt," · "+c(t(f))+" 条评论 ",1)):i("",!0)]),t(s)?.summary?(e(),a("p",st,c(t(s)?.summary),1)):i("",!0),t(s)?.images&&t(s)?.images.length?(e(),a("div",et,[(e(!0),a(y,null,k(t(s).images,(m,N)=>(e(),a("div",{key:`${t(s)?._path}-img-${N}`,class:"flex items-start justify-center overflow-hidden"},[n("img",{src:m,alt:"snapshot",class:"block h-auto w-full max-h-[32rem] max-w-[42rem] rounded-2xl border border-white/15 object-contain"},null,8,at)]))),128))])):i("",!0),t(s)?.tags?(e(),a("div",ot,[(e(!0),a(y,null,k(t(s).tags,m=>(e(),a("span",{key:m,class:"px-3 py-1 text-xs uppercase tracking-[0.2em] text-white/60 border border-white/10 rounded-full"},c(m),1))),128))])):i("",!0),n("div",nt,[t(w)?(e(),a("div",{key:0,innerHTML:t(w)},null,8,rt)):t(s)?(e(),R(D,{key:1,value:t(s)},null,8,["value"])):i("",!0)])]),n("div",ct,[o[2]||(o[2]=n("div",{class:"text-xs uppercase tracking-[0.35em] text-white/50 mb-4"}," Comments ",-1)),b(M)])])}}}),Ct=E(it,[["__scopeId","data-v-f68d6508"]]);export{Ct as default};
