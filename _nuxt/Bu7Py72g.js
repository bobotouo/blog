import{g as c,q as u,L as f}from"./CyUadsVW.js";function o(){const n=f().public.statsBase;return n||(typeof window<"u"?`${window.location.origin}/api`:"")}const d=a=>{const n=u(null),s=async()=>{const t=o();if(!t)return;const e=JSON.stringify({path:a});if(navigator.sendBeacon){const r=new Blob([e],{type:"application/json"});navigator.sendBeacon(`${t}/track`,r);return}await fetch(`${t}/track`,{method:"POST",headers:{"Content-Type":"application/json"},body:e,keepalive:!0})},i=async()=>{const t=o();if(t)try{const e=await $fetch(`${t}/stats`,{query:{path:a},timeout:4e3});typeof e?.views=="number"&&(n.value=e.views)}catch{}};return c(()=>{s(),i()}),{views:n}};export{d as u};
