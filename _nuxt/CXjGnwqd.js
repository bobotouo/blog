import{j as f,g as d,o as g,c as y,q as r,K as h}from"./CdG2JQ7o.js";import{a as _}from"./DtzXf5sO.js";const v=f({__name:"Comments",setup(c){const o=r(null),s=r(!1),e=h(),i=e.public.giscusRepo||"",u=e.public.giscusRepoId||"",p=e.public.giscusCategory||"Announcements",m=e.public.giscusCategoryId||"",a=e.public.giscusTheme||"",l=a&&a!=="preferred_color_scheme"?a:"dark_dimmed",b=()=>{if(s.value||!o.value||!i||!u||!m)return;const t=document.createElement("script");t.src="https://giscus.app/client.js",t.async=!0,t.crossOrigin="anonymous",t.setAttribute("data-repo",i),t.setAttribute("data-repo-id",u),t.setAttribute("data-category",p),t.setAttribute("data-category-id",m),t.setAttribute("data-mapping","specific");const n=typeof window<"u"?window.location.pathname:"";n&&t.setAttribute("data-term",n),t.setAttribute("data-reactions-enabled","1"),t.setAttribute("data-emit-metadata","0"),t.setAttribute("data-input-position","bottom"),t.setAttribute("data-theme",l),t.setAttribute("data-lang","zh-CN"),o.value.appendChild(t),s.value=!0};return d(()=>{o.value&&b()}),(t,n)=>(g(),y("div",{id:"comments",ref_key:"commentsContainer",ref:o,class:"my-8 rounded-2xl border border-white/10 bg-white/5 backdrop-blur-md p-4 md:p-6"},null,512))}}),w=c=>{const o=r(null),s=async()=>{const{data:e}=await _("/api/comments",{query:{path:c},server:!1},"$HyFBWF8tfB");e.value&&typeof e.value.comments=="number"&&(o.value=e.value.comments)};return d(()=>{s()}),{count:o}};export{v as _,w as u};
